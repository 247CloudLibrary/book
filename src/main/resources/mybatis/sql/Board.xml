<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cloudlibrary.books.infrastructure.persistence.mysql.repository.BookRepository">

    <sql id="bookColumns">
         id
        ,rid
        ,isbn
        ,title
        ,thumbNailImage
        ,coverImage
        ,author
        ,translator
        ,contents
        ,publisher
        ,publishDate
        ,bookType
        ,genre
        ,barcode
        ,rfid
        ,bookStatus
        ,libraryId
        ,libraryName
        ,category
        ,createdAt
        ,updatedAt
    </sql>

    <sql id="categoryColumns">
        id
        ,code
        ,codeName
    </sql>

<!--    TODO library table 넣을지 말지 정하기-->


    <select id="findBookAll"  resultType="com.cloudlibrary.books.application.domain.Book">
            SELECT
                    b.<include refid="bookColumns"></include>,
                   c.code, c.codeName
            FROM
                books b
            INNER JOIN
                category c
            ON
                c.id = b.category
            WHERE NOT bookStatus='STOP'
    </select>


</mapper>